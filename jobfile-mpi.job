#!/bin/bash
#SBATCH -J OncoGeriSim
#SBATCH -N 10
#SBATCH --ntasks-per-node 24
#SBATCH -D /home/544688/ogsim
#SBATCH -o /home/544688/ogsim/debug.out
#SBATCH -e /home/544688/ogsim/debug.err
#SBATCH -p compute
#SBATCH --mail-user=gordon.mckenzie@hyms.ac.uk
#SBATCH --mail-type=ALL

echo $SLURM_JOB_NODELIST

module purge
module load python/anaconda/4.6/miniconda/3.7
module add openmpi/gcc/1.10.2

export I_MPI_DEBUG=5
export I_MPI_FABRICS=shm:tmi
export I_MPI_FALLBACK=no

source activate /home/544688/.conda/envs/ogsim
source /home/544688/ogsim/bin/activate
export PATH=/home/544688/ogsim/bin/python3:${PATH}

mpirun python /home/544688/ogsim/mpi.py
